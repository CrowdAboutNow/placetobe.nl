<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../placetobe-styles/placetobe-styles.html">
<link rel="import" href="../placetobe-illustrations/man-holding-key-illustration.html">
<link rel="import" href="../placetobe-illustrations/man-thinking-illustration.html">
<link rel="import" href="../placetobe-illustrations/man-reading-illustration.html">
<link rel="import" href="../placetobe-quickscan/placetobe-investor-quickscan.html">
<link rel="import" href="../placetobe-button/placetobe-button.html">
<link rel="import" href="../placetobe-investor-registration-form/placetobe-investor-registration-form.html">
<link rel="import" href="placetobe-hero-background.html">

<dom-module id="placetobe-hero">
  <template>
    <style>
      :host {
        width: 100%;
        height: 600px;
        min-height: 600px;
        display: flex;
        transition: 0.5s all;
        position: relative;
        overflow: hidden;
        background-color: #60D1D6;        
      }

      @media (max-width: 959px) {
        :host {
          height: auto;
          min-height: 95vh;
        }
      }

      :host:after {
        position: absolute;
        content: "";
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        opacity: 0.4;
        z-index: 0;
        transition: 0.5s all;
      }

      :host[entrepreneur-page-active][entrepreneur-test-page-active], :host[invest-page-active][invest-sub-page-active] {
        min-height: 100vh;
      }


      :host[entrepreneur-page-active][entrepreneur-test-page-active] section article, :host[invest-page-active][invest-sub-page-active] section article {
        display: block;
        margin-bottom: 36px;
      }

      :host[home-page-active]:after {
        background: linear-gradient(-270deg, #1329CE 0%, #FFFFFF 100%);
      }

      :host[invest-page-active]:after {
        background: linear-gradient(-270deg, var(--placetobe-taupe) 0%, #FFFFFF 100%);
        opacity: 0.2;
/*        transform: rotate(3deg);
*/      }

      :host[entrepreneur-page-active]:after {
        background: linear-gradient(-270deg, var(--placetobe-yellow) 0%, #FFFFFF 100%);
/*        transform: rotate(-8deg) translateY(-50px);
*/      }

      :host[home-page-active] {
      }

      :host[invest-page-active] {
      }

      :host[entrepreneur-page-active] {
      }

      :host > section {
        display: block;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        flex: 1;
        flex: none;
        width: 100%;
        @apply(--placetobe-two-column-layout);
        justify-content: flex-start;
        padding: 0;
      }

      @media (max-width: 959px) {
        :host > section {
          display: block;
          @apply(--placetobe-two-column-layout--phone);
        }        
      }

      :host > section article {
        @apply(--placetobe-two-column-item);
        @apply(--placetobe-heading2-regular);
        text-align: left;
        position: relative;
        z-index: 2;
        justify-content: center;
        display: block;
      }

      @media (max-width: 959px) {
        :host > section article {
          @apply(--placetobe-heading2-regular--mobile);
          display: flex;
          justify-content: flex-end;
          flex-direction: column;
          display: block;
        }
      }

      :host > section article .intro-text {
        position: absolute;
        transition: 0.5s all;
        bottom:90px;
      }

      @media (max-width: 959px) {
        :host > section article .intro-text {
          bottom:0;
        }
      }


      :host > section article .intro-text[hidden] {
        opacity: 0;
        color: transparent;
        display: block;
        transform: translateY(50px);
        pointer-events: none;
      }

      :host > section .illustrations {
        @apply(--placetobe-two-column-item);
        display: flex;
        position: relative;
      }

      @media (max-width: 959px) {
        :host > section .illustrations {
          position: absolute;
          top:18px;
          left:18px;
          right:18px;
          bottom:0;
          display: flex;
          max-width: none;
        }
      }

/*      @media (max-width: 600px) {
        :host > section .illustrations {
          display: flex;
          max-width: 100%;
          justify-content: flex-start;
        }
      }
*/
      :host .illustration {
        z-index: 1;
        position: relative;
        position: absolute;
        width: 100%;
        bottom: -6px;
        right:0;
        height: auto;
        transition: 0.5s all;
        transform: scale(0.75);
        transform-origin: 100% 100%;
      }

      @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
        :host .illustration {
          height: 100%;
        }
      }

      @media (max-width: 959px) {
        :host .illustration {
          z-index: 1;
          transform: scale(0.40);
        }
      }

      :host .illustration[hidden] {
        opacity: 0;
        transform: translateY(100px) translateX(50px) scale(0.75, 0.75);
      }

      :host placetobe-investor-quickscan:not([hidden]), :host placetobe-investor-registration-form:not([hidden]) {
        display: block;
        position: absolute;
        bottom: 0%;
      }


      :host placetobe-investor-registration-form h1 {
        @apply(--placetobe-heading4);
      }

      @media (max-width: 1236px) {
        :host placetobe-investor-registration-form h1 {
          @apply(--placetobe-heading4-bold--mobile);
        }
      }

      :host placetobe-investor-registration-form article {
        @apply(--placetobe-body);
        margin: 0 0 36px 0;
      }

      @media (max-width: 959px) {
        :host placetobe-investor-registration-form article {
          @apply(--placetobe-body--mobile);
        }        
      }


      @media (max-width: 959px) {
        :host placetobe-investor-quickscan:not([hidden]), placetobe-investor-registration-form:not([hidden]) {
          position: absolute;
          margin-bottom: 54px;
        }
         :host[invest-page-active][invest-sub-page-active] .illustration {
            display: none;
         }
      }

      :host placetobe-button {
        display: block;
        margin-bottom: 18px;
      }

      :host placetobe-button[flat] {
        --text-color: white;
      }

      :host placetobe-hero-background {
        position: absolute;
        bottom:0;
        width: var(--placetobe-two-column-width);
        height: 446px;
        left: 50%;
        transform: translateX(-50%);
        bottom:-3px;
      }

      @media (max-width: 959px) {
        :host placetobe-hero-background {
          height: auto;
          width: 50vw;
        }
      }

    </style>

    <section>

      <placetobe-hero-background
        car-parked="[[investPageActive]]"
        car-gone="[[entrepreneurPageActive]]"
      ></placetobe-hero-background>

      <article>
        
        <span
          class="intro-text"
          hidden$="[[!homePageActive]]"><b>Iedereen heeft een plek nodig.</b> Een plek om te wonen, werken, ondernemen, relaxen... Een plek om te zijn.<p>
        <placetobe-button
          label="Hoe start ik een project?"
          url="/start-project"
        ></placetobe-button>
        <placetobe-button
          label="Info voor investeerders"
          url="/investeren"
          flat
        ></placetobe-button>
        </p>
        </span>

        <span
          class="intro-text"
          hidden$="[[!entrepreneurPageActive]]">
          <span hidden$="[[entrepreneurTestPageActive]]">
          <b>Geen gebouw neerzetten, maar een plek maken.</b> Vastgoed ontwikkel je samen met de crowd.
          <p>
            <placetobe-button
              label="Direct je project starten"
              url="https://docs.google.com/forms/d/e/1FAIpQLSdFZhTSDI4kRKZlLedroXEmMCEAGVB6fUPSYJkdIL9jrQR1yg/viewform"
              external-link
            ></placetobe-button>
            <placetobe-button
              id="prices-button"
              label="Bekijk onze tarieven"
              url="/tarieven"
              flat
            ></placetobe-button>
          </p>
          </span>
        </span>

        <span
          hidden$="[[!investPageActive]]">
          
          <placetobe-investor-quickscan
            hidden$="[[!investQuickscanPageActive]]"
          ></placetobe-investor-quickscan>
          <placetobe-investor-registration-form
            hidden$="[[!investRegisterPageActive]]"
            on-register="downloadBrochure"
          >

            <h1>Aanmelden als investeerder</h1>
            <article>Goed dat je je wil aanmelden. Vul hieronder je naam en email adres in en je krijgt direct van ons de brochure.</article>
            
          </placetobe-investor-registration-form>

        </span>

        <span
          class="intro-text"
          hidden$="[[!investPageActive]]">
          <span hidden$="[[investSubPageActive]]">
          <b>Crowdfunding in vastgoed.</b> Iedereen een plek en jij rendement.<p>
            <placetobe-button
              label="Meld je aan als investeerder"
              url="/investeren/aanmelden"
            ></placetobe-button>
            <placetobe-button
              label="Doe de quickscan"
              url="/investeren/test"
              on-tap="scrollToPricing"
              flat
            ></placetobe-button>
          </p>
          </span>
        </span>

      </article>

      <div class="illustrations">

        <man-holding-key-illustration
        hidden$="[[!homePageActive]]"
        class="illustration"
        ></man-holding-key-illustration>

        <man-thinking-illustration
        hidden$="[[!investPageActive]]"
        class="illustration"
        ></man-thinking-illustration>

        <man-reading-illustration
        hidden$="[[!entrepreneurPageActive]]"
        class="illustration"
        ></man-reading-illustration>

      </div>

    </section>

  </template>

  <script>
    Polymer({

      is: 'placetobe-hero',

      properties: {
        homePageActive: {
          type: Boolean,
          reflectToAttribute: true
        },
        investPageActive: {
          type: Boolean,
          reflectToAttribute: true
        },
        entrepreneurPageActive: {
          type: Boolean,
          reflectToAttribute: true
        },
        entrepreneurTestPageActive: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        investQuickscanPageActive: {
          type: Boolean,
          value: false,
          reflectToAttribute: true          
        },
        investRegisterPageActive: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        investSubPageActive: {
          type: Boolean,
          reflectToAttribute: true,
          computed: "_computeInvestSubPageActive(investQuickscanPageActive, investRegisterPageActive)"
        }
      },

      scrollToPricing: function() {
        window.scrollTo(0, document.querySelector("placetobe-pricing").offsetTop - 72)
      },

      _computeInvestSubPageActive: function(investQuickscanPageActive, investRegisterPageActive) {
        return (investQuickscanPageActive === true || investRegisterPageActive === true)
      },

      downloadBrochure: function() {
        var downloadElement = document.createElement('a');
        downloadElement.setAttribute('download', true);
        downloadElement.href = 'https://firebasestorage.googleapis.com/v0/b/placetobe-nl.appspot.com/o/Placetobe_Factsheet_versie_6.pdf?alt=media&token=c43f38ea-9413-4640-8a0f-edf62b641e5a';
        downloadElement.click();
      }

    });
  </script>
</dom-module>
