<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../placetobe-styles/placetobe-styles.html">
<link rel="import" href="../placetobe-logo/placetobe-logo.html">
<link rel="import" href="../placetobe-menu-icon/placetobe-menu-icon.html">

<dom-module id="placetobe-header">
  <template>
    <style>
      :host {
        position: fixed;
        width: 100%;
        height: 112px;
        box-shadow: 0 2px 4px rgba(0,0,0,.0);
        z-index: 5;
        display: flex;
        transition: 0.5s all;
      }

      :host[scrolled] {
        background-color: white;      	
        box-shadow: 0 2px 4px rgba(0,0,0,.50);
        height: 72px;
      }

      :host header {
      	@apply(--placetobe-two-column-layout);
      	align-items: center;
      	flex: 1;
      	display: flex;
      }

      @media (max-width: 959px) {
        :host header {
          padding: 0 18px;
        }
      }

      :host #menu {
        display: flex;
        justify-content: flex-end;
      }

      :host #menu > * {
        @apply(--placetobe-two-column-item);
        flex: 1;
      }

      :host #menu a {
        @apply(--placetobe-flat-button);
      	color: var(--placetobe-darkblue);
        transition: 0.25s color;
      }

      @media (max-width: 959px) {
        :host #menu a {
          display: none;
        }
      }

      :host #menu a:hover:not([data-active]) {
        opacity: 0.5;
      }

      :host #menu a[data-active] {
        color: rgba(255, 255, 255, 1);
      }

      :host[scrolled] #menu a[data-active] {
        color: var(--placetobe-red)
      }

      :host[scrolled] a placetobe-logo {
        width: 169px;
        height: 36px;
      }

      :host a {
        -webkit-tap-highlight-color: transparent;
      }

      :host a placetobe-logo {
        width: 221px;
        height: 47px;
        transition: 0.5s all;
      }

      :host placetobe-menu-icon {
        width: 54px;
        height: 54px;
        display: none;
        transition: 0.5s all;
        margin-top: -6px;
      }

      @media (max-width: 959px) {
        :host placetobe-menu-icon {
          display: block;
          cursor: pointer;
        }
        :host[scrolled] placetobe-menu-icon {
          height: 36px;
          width: 36px;
        }
      }

    </style>

    <header>
    	<a href="/"><placetobe-logo on-tap="hideMenu"></placetobe-logo></a>
    	<nav id="menu">
		    <a
          title="Een project starten"
          href="/start-project"
          data-active$="[[entrepreneurPageActive]]">Start een project</a>
		    <a
          title="Investeren"
          href="/investeren"
          data-active$="[[investPageActive]]">Investeer</a>
        <placetobe-menu-icon on-tap="toggleMenu"></placetobe-menu-icon>
      </nav>
    </header>

  </template>

  <script>
    Polymer({

      is: 'placetobe-header',

      properties: {

        menuHidden: {
          type: Boolean,
          notify: true
        },

        homePageActive: {
          type: Boolean,
          reflectToAttribute: true
        },
        investPageActive: {
          type: Boolean,
          reflectToAttribute: true
        },
        entrepreneurPageActive: {
          type: Boolean,
          reflectToAttribute: true
        },
        scrollY: {
        	type: String,
        	value: 0,
        	readOnly: true
        },
        scrolled: {
        	type: Boolean,
        	computed: "_computeScrolled(scrollY)",
        	reflectToAttribute: true,
          notify: true
        }
      },

      ready: function() {
        window.addEventListener('scroll', this._handleScroll.bind(this));
      },

      toggleMenu: function() {
        this.menuHidden = !this.menuHidden;
      },

      hideMenu: function() {
        this.menuHidden = true
      },

      _handleScroll: function() {
      	this._setScrollY(window.scrollY)
      },

      _computeScrolled: function(scrollY) {
      	return (scrollY > 112)
      }

    });
  </script>
</dom-module>
