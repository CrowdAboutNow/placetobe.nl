<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="placetobe-landing-page-styles.html">
<link rel="import" href="../../bower_components/placetobe-campaign-card/placetobe-campaign-card.html">

<dom-module id="placetobe-campagnes-overview-page">
  <template>

    <style include="placetobe-landing-page-styles">

      :host h1 {
        margin-top: calc( var(--placetobe-margin) * 8 );
      }

    </style>

    <iron-ajax
      id="getAllCampaigns"
      url="[[apiEndpoint]]/campaigns"
      handle-as="json"
      method="GET"
      last-response="{{_apiCampaignData}}"
      on-response="_handleResponse"
      on-error="_handleError"
      loading="{{loadingCampaigns}}"
    ></iron-ajax>

    <main>
      <div class="intro">
        <h1><strong>Overzicht campagnes</strong><br></h1>
      </div>

      <template is="dom-repeat" items="[[_apiCampaignData]]" index-as="index">
        [[item.projectNaam]]
      </template>
    </main>
  </template>

  <script>
    Polymer({
      is: 'placetobe-campagnes-overview-page',
      properties: {

        _apiCampaignData: {
          type: Array,
          notify: true
        },

        apiEndpoint: {
          type: String
        },

        _apiCampaignData: {
          type: Object
        },

        loadingCampaigns: {
          type: Boolean,
          notify: true,
        }
      },

      observers: [
        '_getApiData(apiEndpoint)'
      ],

      _getApiData: function(apiEndpoint) {
        this.$.getAllCampaigns.generateRequest();
      }

    })
  </script>
</dom-module>
