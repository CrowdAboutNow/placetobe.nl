<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/placetobe-styles/placetobe-styles.html">
<link rel="import" href="../../bower_components/placetobe-investor-dashboard/placetobe-investor-dashboard.html">
<link rel="import" href="../../bower_components/caas-session/caas-session.html">


<dom-module id="placetobe-investeerders-dashboard-page">
  <template>

    <style include="placetobe-landing-page-styles">

      :host placetobe-investor-dashboard {
        margin-top: calc( var(--placetobe-margin) * 6 );
        margin-bottom: calc( var(--placetobe-margin) * 4 );
      }

      :host h3 {
        margin-top: calc(var(--placetobe-margin) * 8);
      }

      [hidden] {
        display: none!important;
      }
    </style>


    <main>

      <caas-session
        token-data="{{tokenData}}"
        access-token="{{accessToken}}"
      ></caas-session>

      <template is="dom-if" if="[[_isNotInvestor(userRole)]]">
        <div class="intro">
          <h3>Je bent momenteel ingelogd onder een andere rol. Log uit om in te loggen als investeerder.</h3>
          <placetobe-button
            on-tap="signOut"
          >Uitloggen</placetobe-button>
          <br>
          <br>
          <br>
          <br>
        </div>
      </template>

      <placetobe-investor-dashboard
        api-endpoint="[[apiEndpoint]]"
        hidden$="[[_isNotInvestor(userRole)]]"
      ></placetobe-investor-dashboard>

    </main>


  </template>
  <script>
    Polymer({
      is: 'placetobe-investeerders-dashboard-page',
      properties: {
        tokenData: {
          type: Object,
        },
        userRole: {
          type: String,
          computed: '_computeUserRole(tokenData.data.userRole)'
        }
      },

      signOut: function() {
        this.$$('placetobe-investor-dashboard').signOut();
      },

      _computeUserRole: function(userRole) {
        return userRole;
      },

      _isNotInvestor: function(userRole) {
        return userRole !== 'investor';
      }
    })
  </script>
</dom-module>
