<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../placetobe-header/placetobe-header.html">
<link rel="import" href="../placetobe-hero/placetobe-hero.html">
<link rel="import" href="../placetobe-styles/placetobe-styles.html">
<link rel="import" href="../placetobe-button/placetobe-button.html">
<link rel="import" href="../placetobe-pricing/placetobe-pricing.html">
<link rel="import" href="../placetobe-action-block/placetobe-action-block.html">

<dom-module id="placetobe-app">
  <template>
    <style>
      :host {
        display: block;
        margin: 0;
      }

      :host placetobe-hero {
        margin-bottom: 0;
      }

      :host .intro {
        margin: 72px auto;
        max-width: var(--placetobe-two-column-width);
        max-height: 9999px;
        overflow: hidden;
        padding: 0 36px;
      }

      :host .intro h2 {
        @apply(--placetobe-heading3-bold);
        margin-bottom: 36px;
      }

      :host .intro article {
        @apply(--placetobe-body);
      }

      :host #calls:not([hidden]) {
        @apply(--placetobe-two-column-layout);
      }

      @media (max-width: 1236px) {
        :host #calls:not([hidden]) {
          @apply(--placetobe-two-column-layout--phone);
        }
      }

      :host #calls > * {
        @apply(--placetobe-two-column-item);
          margin-bottom: 36px;
      }

      @media (max-width: 1236px) {
        :host #calls > * {
          max-width: 100%;
        }
      }

      :host placetobe-pricing[hidden] {
        display: none;
      }

      :host #call-to-entrepreneur {
        background-color: var(--placetobe-blue);
      }

      :host #call-to-investor {
        background-color: var(--placetobe-green);
      }
    </style>

    <app-location
      route="{{route}}"
    ></app-location>

    <app-route
      route="{{route}}"
      pattern="/"
      data="{{routeData}}"
      active="{{homePageActive}}"
    ></app-route>

    <app-route
      route="{{route}}"
      pattern="/investeren"
      data="{{routeData}}"
      active="{{investPageActive}}"
      tail="{{investSubroute}}"
    ></app-route>

    <app-route
      route="{{route}}"
      pattern="/start-project"
      data="{{routeData}}"
      active="{{entrepreneurPageActive}}"
      tail="{{entrepreneurSubroute}}"
    ></app-route>

    <app-route
      route="{{entrepreneurSubroute}}"
      pattern="/test"
      data="{{entrepreneurSubrouteData}}"
      active="{{entrepreneurTestPageActive}}"
    ></app-route>

    <app-route
      route="{{investSubroute}}"
      pattern="/test"
      data="{{investSubrouteData}}"
      active="{{investQuickscanPageActive}}"
    ></app-route>

    <app-route
      route="{{investSubroute}}"
      pattern="/aanmelden"
      data="{{investSubrouteData}}"
      active="{{investRegisterPageActive}}"
    ></app-route>

    <placetobe-header
      home-page-active="[[homePageActive]]"
      invest-page-active="[[investPageActive]]"
      entrepreneur-page-active="[[entrepreneurPageActive]]"
    ></placetobe-header>

    <placetobe-hero
      home-page-active="[[homePageActive]]"
      invest-page-active="[[investPageActive]]"
      entrepreneur-page-active="[[entrepreneurPageActive]]"
      entrepreneur-test-page-active="[[entrepreneurTestPageActive]]"
      invest-quickscan-page-active="[[investQuickscanPageActive]]"
      invest-register-page-active="[[investRegisterPageActive]]"
    ></placetobe-hero>

    <section
      id="why"
      class="intro"
      hidden$="[[!homePageActive]]"
      >
      <h2>Een eerlijke vastgoedmarkt</h2>
      <article>
      Iedereen heeft een plek nodig. Een plek om te wonen, te werken, te sporten, te ondernemen, te eten, te relaxen… een plek om te zijn.
      <p>
      Wij vinden dat de vastgoedmarkt anders kan. Makkelijker, eerlijker, en vooral: beter voor elkaar. Waarom zou alleen een bank iets te vinden hebben over hoe we wonen, werken, leven? Dat kunnen we toch beter samen beslissen?<p>
      Met Placetobe brengen we ontwikkelaars, investeerders en gebruikers bij elkaar en zorgen we voor een win-win-win voor iedereen.
      </p>
      </article>
    </section>

    <template is="dom-if" if="[[!investSubPageActive]]">

      <section
        id="intro-investors" 
        class="intro"
        hidden$="[[!investPageActive]]"
        >
        <h2>Investeren in vastgoed met placetobe</h2>
        <article>In een aantal zinnen pitchen we waarom investeren via placetobe een goed idee is. We doen eerst een beroep op het besef dat samen vastgoed realiseren een goed idee is. Daarnaast moet ook duidelijk zijn dat hier op een veilige en gebruiksvriendelijke manier rendement kan worden gemaakt op investeringen.<p>Zowel de hardcore investeerder als de toekomstige gebruiker met een kleinere portemonnee moet zich aangesproken voelen.
        </p>
        </article>
      </section>

      <placetobe-action-block
        title="Ben jij een crowdfunder?"
        action-label="doe de quickscan"
        action-url="/investeren/test"
        target="investors"
        hidden$="[[!investPageActive]]"
      >Beantwoord 5 vragen en krijg direct feedback of jij geschikt bent als investeerder.
      </placetobe-action-block>

    </template>

    <template is="dom-if" if="[[!entrepreneurTestPageActive]]">

      <section
        id="intro-entepreneurs" 
        class="intro"
        hidden$="[[!entrepreneurPageActive]]"
        >
        <h2>Vastgoed crowdfunden met placetobe</h2>
        <article>Hier pitchen in een paar zinnen onze propositie naar ondernemers/projectontwikkelaars.<p>Eerst signaleren we het probleem: het is lastig om  kleine vastgoedprojecten te financieren mbv banken. Daarnaast is er vaak onvoldoende betrokkenheid van gebruikers bij ontwikkeling van vastgoed, wat de slagingskans niet ten goede komt.
        <p>
        Vervolgens vertellen we waarom wij het antwoord daarop zijn: crowdfunding in het algemeen om een grotere groep mensen betrokken te maken, en wij in het bijzonder door onze kennis van de markt en de gebruiksvriendelijkheid en veiligheid van de webapplicatie.
        <p>
        Dit alles moet korter dan de tekst die hier nu staat. 
        </p>
        </article>
      </section>

      <placetobe-action-block
        title="Heb jij een placetobe?"
        action-label="Project aanmelden"
        action-url="https://docs.google.com/forms/d/e/1FAIpQLSdFZhTSDI4kRKZlLedroXEmMCEAGVB6fUPSYJkdIL9jrQR1yg/viewform"
        target="entrepreneurs"
        hidden$="[[!entrepreneurPageActive]]"
        external-action
      >Meld direct online je project aan.
      </placetobe-action-block>

      <section
        id="calls"
        hidden$="[[!homePageActive]]"
        >

        <placetobe-action-block
          title="Project starten?"
          action-label="Meer info"
          action-url="/start-project"
          target="entrepreneurs"
        >Je bent geïnteresseerd om  met behulp van crowdfunding  projecten te realiseren maar je weet niet of het iets voor je is.
        </placetobe-action-block>

        <placetobe-action-block
          title="Investeren in een project?"
          action-label="Doe de quickscan"
          action-url="/investeren/test"
          target="investors"
        >Je bent geïnteresseerd om  te investeren in vastgoed via  crowdfunding maar je weet niet  of het iets voor je is.
        </placetobe-action-block>

      </section>

      <placetobe-pricing
        hidden$="[[!entrepreneurPageActive]]"
      ></placetobe-pricing>

    </template>

  </template>

  <script>
    Polymer({

      is: 'placetobe-app',

      properties: {
        route: {
          type: Object,
          observer: "routeChanged"
        },
        routeData: Object,
        entrepreneurSubroute: Object,
        entrepreneurSubrouteData: Object,
        investSubroute: Object,
        investSubrouteData: Object,
        homePageActive: Boolean,
        investPageActive: Boolean,
        entrepreneurPageActive: Boolean,
        entrepreneurTestPageActive: Boolean,
        investQuickscanPageActive: Boolean,
        investRegisterPageActive: Boolean,
        investSubPageActive: {
          type: Boolean,
          computed: "_computeInvestSubPageActive(investQuickscanPageActive, investRegisterPageActive)"
        }
      },

      _computeInvestSubPageActive(investQuickscanPageActive, investRegisterPageActive) {
        return (investQuickscanPageActive === true || investRegisterPageActive === true)
      },

      routeChanged: function(newRoute, oldRoute) {
        if(!(newRoute && oldRoute)) return;
        if(newRoute.path !== oldRoute.path) this._handleRouteChanged(newRoute.path, oldRoute.path);
      },

      _handleRouteChanged: function(newPath, oldPath) {
        window.scrollTo(0,0)
      }

    });
  </script>
</dom-module>
